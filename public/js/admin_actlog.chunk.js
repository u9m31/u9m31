(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"8nb2":function(e,a,t){"use strict";var o={name:"CSVDownload",props:{color:String,icon:String,title:String,url:String,filename:String},data:function(){return{csvdownloading:!1}},created:function(){console.log("CSV Download Btn created.")},methods:{csvdownload:function(e,a){console.log("CSV Download func csvdownload");this.csvdownloading=!0,axios.post(this.url,{responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){this.csvdownloading=!1,this.saveCsvFile(e)}.bind(this)).catch(function(e){console.log("CSV Download csvdownload error"),this.csvdownloading=!1,console.log(e),e.response&&[401,419].includes(e.response.status)&&this.$emit("axios-logout")}.bind(this))},saveCsvFile:function(e){var a=new Blob(["\ufeff"+e.data],{type:"text/csv"}),t=this.filename;if(t||(t=this.$route.meta.name),t+="_"+moment(Date.now()).format("YYYYMMDD_HHmmss")+".csv",window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t),window.navigator.msSaveOrOpenBlob(a,t);else{var o=window.URL.createObjectURL(a),n=document.createElement("a");n.href=o,n.setAttribute("download",t),n.click()}}}},n=t("KHd+"),s=Object(n.a)(o,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-btn",{attrs:{block:"",flat:"",color:e.color?e.color:"primary",loading:e.csvdownloading,disabled:e.csvdownloading},on:{click:function(a){return e.csvdownload(e.filename,e.url)}}},[t("v-icon",{staticClass:"mr-1",attrs:{dark:""}},[e._v(e._s(e.icon?e.icon:"cloud_download"))]),e._v(" "+e._s(e.title?e.title:"CSV ダウンロード")+"\n  "),t("v-progress-circular",{attrs:{slot:"csvdownload",indeterminate:"",color:"primary",dark:""},slot:"csvdownload"})],1)},[],!1,null,null,null);s.options.__file="CsvDownload.vue";a.a=s.exports},HilE:function(e,a,t){"use strict";t.r(a);var o={name:"ActlogComponent",components:{"csv-download":t("8nb2").a},props:{},data:function(){return{loading:!1,search:"",pagination:{sortBy:"created_at",descending:!0},tabledata:[],headers:[{align:"center",sortable:!1,text:"No"},{align:"left",sortable:!0,text:"日時",value:"created_at"},{align:"left",sortable:!0,text:"氏名",value:"name"},{align:"left",sortable:!0,text:"操作",value:"action"},{align:"center",sortable:!0,text:"結果",value:"status"},{align:"left",sortable:!0,text:"データ",value:"data"},{align:"left",sortable:!0,text:"ＩＰ",value:"remote_addr"},{align:"left",sortable:!0,text:"ＵＡ",value:"user_agent"}]}},created:function(){console.log("Actlog Component created."),this.initialize()},methods:{initialize:function(){this.getData()},getData:function(){console.log("Actlog Component getData"),this.loading=!0,axios.post("/api/admin/actlog").then(function(e){this.loading=!1,console.log(e),e.data.data&&(this.tabledata=this.setAction(e.data.data))}.bind(this)).catch(function(e){this.loading=!1,console.log(e),e.response&&[401,419].includes(e.response.status)&&this.$emit("axios-logout")}.bind(this))},setAction:function(e){console.log("Actlog Component setAction");for(var a="",t=0;t<e.length;t++){switch(e[t].route){case"show.login":a="ログイン画面";break;case"login":a="ログイン";break;case"logout":a="ログアウト";break;case"admin.user.index":a="社員一覧";break;case"admin.user.store":a="社員追加";break;case"admin.user.destroy":a="社員削除";break;case"admin.user.download":a="社員CSV_DL";break;case"admin.user.upload":a="社員CSV_UP";break;case"admin.csvpayslip.index":a="給与明細検索";break;case"admin.csvpayslip.upload":a="給与明細登録";break;case"admin.csvpayslip.delete":a="給与明細削除";break;case"admin.csvpayslip.publish":a="給与明細公開";break;case"admin.payslip.index":a="給与明細一覧";break;case"admin.payslip.delete":a="給与明細削除";break;case"admin.payslip.pdf":a="給与明細PDF";break;case"admin.actlog.index":a="操作履歴一覧";break;case"admin.actlog.download":a="操作履歴ダウンロード";break;default:a=e[t].route}e[t].action=a}return e}}},n=t("KHd+"),s=Object(n.a)(o,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-flex",[t("v-card",{staticClass:"m-3 px-3",attrs:{xs12:""}},[t("v-card-title",{staticClass:"title"},[t("v-icon",{staticClass:"pr-2"},[e._v(e._s(e.$route.meta.icon))]),e._v(" "+e._s(e.$route.meta.name)+" "+e._s()+"\n      "),t("v-spacer"),e._v(" "),t("v-spacer"),e._v(" "),t("v-text-field",{attrs:{"prepend-icon":"search",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1),e._v(" "),t("v-data-table",{staticClass:"elevation-0 p-1",attrs:{headers:e.headers,items:e.tabledata,pagination:e.pagination,"rows-per-page-items":[10,25,50,{text:"All",value:-1}],loading:e.loading,search:e.search},on:{"update:pagination":function(a){e.pagination=a}},scopedSlots:e._u([{key:"items",fn:function(a){return[t("tr",[t("td",{staticClass:"text-xs-center",attrs:{xs1:""}},[e._v(e._s(a.index+1+(e.pagination.page-1)*e.pagination.rowsPerPage))]),e._v(" "),e._l(e.headers.length-1,function(o){return[t("td",{class:"text-xs-"+e.headers[o].align,staticStyle:{"white-space":"nowrap"},domProps:{textContent:e._s(a.item[e.headers[o].value])}})]})],2)]}}])},[t("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-card-actions",[t("csv-download",{attrs:{url:"/api/admin/actlog/download",color:"primary"},on:{"axios-logout":function(a){return e.$emit("axios-logout")}}})],1)],1)],1)},[],!1,null,null,null);s.options.__file="ActlogComponent.vue";a.default=s.exports}}]);